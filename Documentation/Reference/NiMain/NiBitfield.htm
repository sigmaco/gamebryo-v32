<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>NiBitfield</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2"
type="text/javascript">
</script><script language="JavaScript1.2" type="text/javascript">
WriteNavLink(2);
</script>

<p class="NDLRefHeadClassTitle">NiBitfield</p>

<p class="NDLRefHeaderFile">&lt;NiBitfield.h&gt;</p>

<p class="NDLRefHead1">Description</p>

<p>This header contains several useful macros and templated
functions for use with bitfields. Standard C++ bitfields are not
cross-platform compatible. As such, these methods were designed
to mimic the functionality of bitfields.</p>

<p class="NDLRefHead1">Supported Functions</p>

<p class="NDLRefMemberFunction">template&lt;class TYPE&gt; void
NiTSetField(TYPE&amp; uFlags, TYPE uValue, TYPE uMask, TYPE
uPos)</p>

<p class="NDLRefMemberDescription">Set a field in a bitfield
specified by <span class="NDLSystemFont">uFlags</span> to the
specified <span class="NDLSystemFont">uValue</span>. The mask
determines which bits are set. The <span class=
"NDLSystemFont">uPos</span> indicates how much the value is
shifted to fit into the field.</p>

<p class="NDLRefMemberFunction">template&lt;class TYPE&gt; TYPE
NiTGetField(TYPE uFlags, TYPE uMask, TYPE uPos)</p>

<p class="NDLRefMemberDescription">Get a field in a bitfield
specified by <span class="NDLSystemFont">uFlags</span>. The mask
determines which bits are retrieved. The <span class=
"NDLSystemFont">uPos</span> indicates how much the value is
shifted to return the proper value.</p>

<p class="NDLRefMemberFunction">template&lt;class TYPE&gt; void
NiTSetBit(TYPE&amp; uFlags, bool bValue, TYPE uMask)</p>

<p class="NDLRefMemberDescription">Set a bit in a bitfield
specified by <span class="NDLSystemFont">uFlags</span> to the
specified <span class="NDLSystemFont">uValue</span>. The mask
determines which bit is set.</p>

<p class="NDLRefMemberFunction">template&lt;class TYPE&gt; bool
NiTGetBit(TYPE uFlags, TYPE uMask)</p>

<p class="NDLRefMemberDescription">Get a bit in a bitfield
specified by <span class="NDLSystemFont">uFlags</span> to the
specified <span class="NDLSystemFont">uValue</span>. The mask
determines which bit is retrieved.</p>

<p class="NDLRefMemberFunction">template&lt;class TYPE&gt; TYPE
NiTGetBitMask(TYPE uPos, TYPE uSize)</p>

<p class="NDLRefMemberDescription">Compute the bitmask for a
field with the bit at the given <span class=
"NDLSystemFont">uPos</span> and <span class=
"NDLSystemFont">uSize</span>. This function will not work with
types whose size is greater than an unsigned int.</p>

<p class="NDLRefHead1">Macros</p>

<p class="NDLRefMemberFunction">NiBeginBitfieldEnum()</p>

<p class="NDLRefMemberDescription">Declared in a header to begin
a bitfield. This creates the first enumeration, <span class=
"NDLSystemFont">BITFIELDSTART and BITFIELDALLONES</span>, which
are used in subsequent enumerations. Only one occurrence of this
macro should exist in a class.</p>

<p class="NDLRefMemberFunction">NiBeginDefaultBitfieldEnum()</p>

<p class="NDLRefMemberDescription">The same as <span class=
"NDLSystemFont">NiBeginBitfieldEnum()</span> with the addition of
a function declaration used by later enumerations. All subsequent
enumerations should use the "Default" form.</p>

<p class="NDLRefMemberFunction">NiEndBitfieldEnum()</p>

<p class="NDLRefMemberDescription">Declared in a header to end a
bitfield.</p>

<p class="NDLRefMemberFunction">NiEndDefaultBitfieldEnum()</p>

<p class="NDLRefMemberDescription">Declared in a header to end a
default bitfield. Used to end a "Default" bitfield.</p>

<p class="NDLRefMemberFunction">NiDeclareBitfieldEntry(name,
size, previous)</p>

<p class="NDLRefMemberDescription">Declared in a header to
specify a set of enumerations that define the position
<span class="NDLSystemFont">(name##_POS)</span>, <span class=
"NDLSystemFont">size</span> <span class=
"NDLSystemFont">(name##_SIZE)</span>, and mask <span class=
"NDLSystemFont">(name##_MASK)</span> relative to the previous
name in the bitfield. Whenever this enumeration needs to be set
to the beginning of a bitfield, <span class=
"NDLSystemFont">BITFIELDSTART</span> should be the value for
previous. This allows for entries in the bitfield to be defined
relative to each other. Care must be taken to make sure that the
<span class="NDLSystemFont">previous</span> does in fact point to
the previous entry in the bitfield.</p>

<p class="NDLRefMemberFunction">NiDeclareLastBitfieldEntry(name,
size, previous)</p>

<p class="NDLRefMemberDescription">Declared in a header to
specify that this entry is the last in a series in the bitfield
enumeration. The calculations that determine the mask can
overflow if this is not used at the end of a bitfield enumeration
for the last bits.</p>

<p class="NDLRefMemberFunction">
NiDeclareIndexedBitfieldEntry(name, size, previous, index)</p>

<p class="NDLRefMemberDescription">Similar to <span class=
"NDLSystemFont">NiDeclareBitfieldEntry</span>, this macro is
declared in a header to specify a set of enumerations that
additionally defines which index <span class=
"NDLSystemFont">(name##_INDEX)</span> a field in the bitfield
resides. This is used when the bitfield is actually an array of
primitive types.</p>

<p class="NDLRefMemberFunction">
NiDeclareLastIndexedBitfieldEntry(name, size, previous,
index)</p>

<p class="NDLRefMemberDescription">Similar to <span class=
"NDLSystemFont">NiDeclareLastBitfieldEntry</span>, this macro is
declared in a header to specify a set of enumerations that
additionally defines which index <span class=
"NDLSystemFont">(name##_INDEX)</span> a field in the bitfield
resides. This is used when the bitfield is actually an array of
primitive types.</p>

<p class="NDLRefMemberFunction">
NiDeclareDefaultBitfieldEntry(name, size, previous)</p>

<p class="NDLRefMemberDescription">Same as <span class=
"NDLSystemFont">NiDeclareBitfieldEntry</span>, but adds in
default function implementations for accessors and a <span class=
"NDLSystemFont">ToString</span> method.</p>

<p class="NDLRefMemberFunction">
NiDeclareDefaultLastBitfieldEntry(name, size, previous)</p>

<p class="NDLRefMemberDescription">Same as <span class=
"NDLSystemFont">NiDeclareLastBitfieldEntry</span>, but adds in
default function implementations for accessors and a <span class=
"NDLSystemFont">ToString</span> method.</p>

<p class="NDLRefMemberFunction">
NiDeclareDefaultIndexedBitfieldEntry(name, size, previous,
index)</p>

<p class="NDLRefMemberDescription">Same as <span class=
"NDLSystemFont">NiDeclareIndexedBitfieldEntry</span>, but adds in
default function implementations for accessors and a <span class=
"NDLSystemFont">ToString</span> method.</p>

<p class="NDLRefMemberFunction">
NiDeclareDefaultLastIndexedBitfieldEntry(name, size, previous,
index)</p>

<p class="NDLRefMemberDescription">Same as <span class=
"NDLSystemFont">NiDeclareLastIndexedBitfieldEntry</span>, but
adds in default function implementations for accessors and a
<span class="NDLSystemFont">ToString</span> method.</p>

<p class="NDLRefMemberFunction">NiBitfieldGetField(name, type,
data_member)</p>

<p class="NDLRefMemberFunction">NiBitfieldSetField(name, value,
type, data_member)</p>

<p class="NDLRefMemberFunction">NiBitfieldGetIndexedField(name,
type, data_member)</p>

<p class="NDLRefMemberFunction">NiBitfieldSetIndexedField(name,
value, type, data_member)</p>

<p class="NDLRefMemberDescription">Macros that wrap the
<span class="NDLSystemFont">NiTGet/SetField</span> functions
above. The <span class="NDLSystemFont">name</span> should match
the name used in the <span class=
"NDLSystemFont">NiDeclare..Entry</span> macros. The <span class=
"NDLSystemFont">type</span> should match the primitive type used
for the bitfield. The <span class=
"NDLSystemFont">data_member</span> should be the variable name
that contains the bitfield.</p>

<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
