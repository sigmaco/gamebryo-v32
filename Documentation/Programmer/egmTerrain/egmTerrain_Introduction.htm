<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>Introduction to egmTerrain</title>
<!--(Begin Meta)================================================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Fresnel" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)==================================================================================-->
    
<!--(Begin Links)===============================================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=================================================================================-->

</head>

<!--(Begin Body)================================================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2" type="text/javascript">
</script><script language="JavaScript1.2" type="text/javascript">
WriteNavLink(2);
</script>

  <h1>
    Introduction to egmTerrain</h1>
  <p>
    The Game Framework integration of the terrain engine provides basic support for
    terrain entities within block files. By adding an appropriate terrain service to
    an application, terrain entities are immediately supported and will be loaded, queried
    and rapidly iterated as any other asset within a block file scene.
  </p>
  </div>
  <h2>
    Class Hierarchy
  </h2>
  <p>
    The three main classes involved in this integration are the various 
    <span class="NDLSystemFont"><a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">TerrainService</a></span>
    incarnations that may be used in applications. The following diagram illustrates
    the inheritance relationship of these classes.
  </p>
  <div class="FigureContainer">
    <img alt="Class relationship diagram" src="images/egmTerrainClasses.png">
    <p class="FigureCaption">
      Diagram: <i>Class relationship diagram</i></p>
  </div>
  <p>
    In the diagram above, the boxes in blue represent classes that implement the 
    <span class="NDLSystemFont">IBaseService</span>
    class, the yellow boxes denote the projects/namespaces that these classes exist
    within.
  </p>
  <p>
    Whilst there are three main classes to use to integrate terrain into your application,
    only one of these classes may be used at any one time within an application. The
    functionality provided by each class is described in the following sections.
  </p>
  <h3>
    TerrainService
  </h3>
  <p>
    The <span class="NDLSystemFont"><a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">TerrainService</a></span> class implemented in the class implemented in the
    <span class="NDLSystemFont">
    <a href="../../Reference/egmTerrain/Introduction_to_egmTerrain_Class_Reference.htm">
    egmTerrain</a></span> project provides basic support for loading, unloading, and 
    picking against terrain entities within an application. Like any other Game 
    Framework service, this service should be added during the initialization of the 
    application and before any block files are loaded.
  </p>
  <p>
    The <a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">TerrainService</a></span> implements the following sets of functionality:
  </p>
  <ul>
    <li>Automatic Terrain entity preloading, loading, unloading and management.</li>
    <li>Material and Material package management.</li>
    <li>Picking service integration.</li>
    <li>Rapid iteration of terrain assets.</li>
  </ul>
  <p>
    This service is recommended for applications that require basic terrain support
    (most non PhysX game applications).
  </p>
  </div>
  <div>
    <h3>
      ToolTerrainService
    </h3>
    <p>
      The <span class="NDLSystemFont">
      <a href="../../Reference/egmToolServices/egmToolServices__ToolTerrainService.htm">
      ToolTerrainService</a></span> is an extension of the 
      <span class="NDLSystemFont"><a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">
      TerrainServicee <span cla and is implemented in the <span class="NDLSystemFont">
      <a href="../../Reference/egmToolServices/Introduction_to_egmToolServices_Class_Reference.htm">
      egmToolServices</a></span> project. Its main purpose is to provide further 
      functional support for tool applications such as Toolbench when editing terrain 
      assets.
    </p>
    <p>
      On top of the functionality provided by the egmTerrain/egmTerrain__TerrainService.htm">TerrainService</a></span>, this service implements
      the following sets of functionality:
    </p>
    <ul>
      <li>Ability to save terrain assets </li>
      <li>Ability to save material package assets </li>
      <li>Painting and deformation support for terrain assets </li>
    </ul>
    <p>
      Note that whilst the <span class="NDLSystemFont">
      <a href="../../Reference/egmToolServices/egmToolServices__ToolTerrainService.htm">
      ToolTerrainService</a></span> does not explicitly support the simulation of 
      PhysX on terrain objects, this service does provide the ability to save PhysX 
      data with terrains that have been modelled with the PhysXTerrain model.
    </p>
    <p>
      This service is recommended for applications that require advanced terrain 
      support, including the ability to paint and deform terrain and save the assets 
      to disk (external tool applications such as Toolbench). 
      The <span class="NDLSystemFont"><a href="../../Reference/egmPhysXTerrain/egmPhysXTerrain__PhysXTerrainService.htm">
      PhysXTerrainService</a></span> is an extension of the 
      <span class="NDLSystemFont"><a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">
      TerrainService</a></span> project and is implemented in the <span class="NDLSystemFont">
      <a href="../../Reference/egmPhysXTerrain/Introduction_to_egmPhysXTerrain_Class_Reference.htm">
      egmPhysXTerrain</a></span> project.
    </p>
    <p>
      On top of the functionality provided by the <span class="NDLSystemFont"><a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">
      TerrainService</a></span>, this service implements
      the following sets of functionality:
    </p>
    <ul>
      <li>PhysX simulation with terrain heightmap data.
      </li>
    </ul>
    <p>
      This service is recommended for applications that require basic terrain support
      with added PhysX integration (PhysX enabled game applications).
    </p>
    <h2>
      Configuring the Game Framework for Terrain
    </h2>
    <p>
      Configuration of the Game Framework to work with terrain involves making sure the
      following things have been done:
    </p>
    <ul>
      <li>The asset web is configured correctly for terrain (consult the documentation on
        terrain assets for details). </li>
      <li>A <span class="NDLSystemFont"><a href="../../Reference/egmTerrain/egmTerrain__TerrainService.htm">TerrainService</a></span> class has been registered with the relevant service manager of
        the application.
      </li>
    </ul>
    <p>
      The user is encouraged to read the descriptions of each type of terrain service
      in the introductory documentation to select the service that is appropriate for
      their application, then use code similar to the following lines in the application
      initialization to register that service.
    </p>
<pre>
egmTerrain::TerrainServicePtr spTerrainService = EE_NEW egmTerrain::TerrainService();
m_spServiceManager-&gt;RegisterSystemService(egmTerrain::TerrainService::CLASS_ID,pTerrainService);
</pre>
    <h2>
      Limitations
    </h2>
    <p>
      Currently, most functionality within the terrain service does not support multiple
      terrains being loaded simultaneously. For this reason, it is not recommended to
      have two terrains loaded at the same time as doing so may cause unexpected issues
      in this release.
    </p>
</body>
</html>
