<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>Constant Maps</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2" type="text/javascript"></script> <script language="JavaScript1.2" type="text/javascript">WriteNavLink(2);</script>


<h1>Constant Maps</h1>

<p>Within a pass, you can specify shader programs and constant 
 maps for those programs. There are several factors to consider when setting 
 up constant maps. Consider the fragment from our sample shader.</p>

<pre>
Pass BaseGlowBump
{
    VSProgram   "BaseBumpWithSpatialGlow"

    VS_Constantmap
    {
        CM_Defined      WorldViewProjTranspose  0       0
        CM_Defined      InvWorldTranspose       4       0
        CM_Global       GlowLightPosition       8   1  
        CM_Constant     Zoze                    9   1   0.0, 1.0, 0.0, 0.3
        CM_Attribute    GlowAttenuation         10  1   0
        CM_Global       Light1Direction         11  1  
        CM_Global       Light2Direction         12  1  
    }
</pre>

<h2>Constant Types</h2>

<p>There are several types of constants available in an 
 NSF file. <span class="NDLSystemFont">CM_Defined</span> 
 indicates a constant that is defined by the renderer on a per object basis. 
 Defined constants represent values such as transformation matrices or 
 material properties. <span class="NDLSystemFont">CM_Constant</span> 
 indicates constant values that are defined inline. <span class="NDLSystemFont">CM_Global</span> 
 and <span class="NDLSystemFont">CM_Attribute</span> reference 
 global and local attributes respectively.</p>

<p>As stated previously, global attributes that will not 
 change over the course of an application should be coded directly into 
 the constant map with <span class="NDLSystemFont">CM_Constant</span>. 
 In the example above, the value <span class="NDLSystemFont">Zoze</span>, 
 short for zero, one, zero, is placed directly into the constant map. This 
 value is needed for all shaders, but it does not change nor does it vary 
 across instances of the shader.</p>

<p>Also note that the constants are packed as close together 
 as possible. Placing the constants into contiguous registers allows the 
 shader system to upload them to the hardware in the most efficient manner 
 possible.</p>

<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
