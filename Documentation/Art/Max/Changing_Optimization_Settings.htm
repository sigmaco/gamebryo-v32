<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>Changing Optimization Settings in 3ds Max</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2"
type="text/javascript">
</script><script language="JavaScript1.2" type="text/javascript">
WriteNavLink(2);
</script>

<h1>Changing Optimization Settings in 3ds Max</h1>

<p>You can customize your process script options to optimize the
scene graph of your exported .nif files. Optimizing the scene
graph can reduce memory overhead and traversal time.</p>

<p class="NDLHeadingProcedure">To change optimization
settings</p>

<ol>
    <li>Make sure that the Gamebryo Maxscript Toolbar is loaded
    and available in 3ds Max.

        <p class="indent1">See <a href=
        "Gamebryo_MaxScript_Toolbar_Introduction.htm">Gamebryo
        MaxScript Toolbar Introduction</a>.</p>
    </li>

    <li>In 3ds Max, create a teapot (or any other object). You
    should now have something similar to the image below.

        <div class="FigureContainer">
            <img src="images/TutorialViewing01.jpg" width="600"
            height="450" alt="TutorialViewing01 (72K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>Click the <span class="NDLGUILabel">Export to
    Gamebryo</span> button (see image below).

        <div class="FigureContainer">
            <img src="images/Exporting2.jpg" width="505" height=
            "484" alt="Exporting2 (91K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>In the Export File dialog box, type the name of the file
    that you want to save and then click <span class=
    "NDLGUILabel">Save</span>. (If you've exported previously,
    the application will remember the last file name used. In
    this case, we chose "Test.nif".)

        <div class="FigureContainer">
            <img src="images/Exporting1.jpg" width="563" height=
            "412" alt="Exporting1 (26K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>In the Export Scene to NIF File dialog box, click the
    <span class="NDLGUILabel">Edit</span> button next to the
    <span class="NDLGUILabel">Process Script</span> drop-down.

        <p class="indent1">See <a href=
        "Gamebryo_3ds_max_Export_Options1.htm">Gamebryo 3ds Max
        Export Options</a>.</p>

        <div class="FigureContainer">
            <img src="images/ExportDialog.jpg" width="534"
            height="464" alt="ExportDialog (131K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>In the Script Editor dialog, verify that "Default Process
    Script" is listed in the <span class="NDLGUILabel">Current
    Script</span> drop-down. Note that the Scene Graph
    Optimization plug-in is listed in the <span class=
    "NDLGUILabel">Plugin List for Current Script</span> listbox.
    For the time being, do not alter the script. Instead, click
    <span class="NDLGUILabel">OK</span>.

        <div class="FigureContainer">
            <img src="images/ScriptEditor.jpg" width="624"
            height="506" alt="ScriptEditor (107K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>In the Export Scene to NIF File dialog, verify that
    "Default Process Script" is listed in the <span class=
    "NDLGUILabel">Process Script</span> drop-down and then click
    <span class="NDLGUILabel">OK</span>.

        <p class="indent1">The file is exported as Test.nif to
        the directory that you specified in step 4.</p>
    </li>

    <li>Locate and double-click Test.nif.

        <p class="indent1">The file opens in the Gamebryo Asset
        Viewer.</p>
    </li>

    <li>In the Asset Viewer, click the scene graph tree icons
    until you find an NiMesh object named "Teapot". Note the
    scene graph hierarchy in this file. There is the "Scene Root"
    and it has 4 children. The structure of the .nif file differs
    from the structure of the Max asset. The Teapot01 node is
    included in the Max asset, but it is missing from the .nif
    file. The .nif does not include this node because the process
    script uses the Scene Graph Optimization plug-in, which
    removes the node because it is unnecessary.

        <div class="FigureContainer">
            <img src="images/TeapotBefore.jpg" width="703"
            height="573" alt="TeapotBefore (112K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>

        <p class="indent1">However, suppose we need this node for
        our game to work properly. How can we keep it from
        disappearing? The answer is to change the process
        script.</p>
    </li>

    <li>If it is not still running, launch 3ds Max again and open
    the art asset that you previously exported. As before, click
    the <span class="NDLGUILabel">Export to Gamebryo</span>
    button, and, in the Export File dialog, save the file.</li>

    <li>In the Export Scene to NIF File dialog box, verify that
    "Default Process Script" is still listed in the <span class=
    "NDLGUILabel">Process Script</span> drop-down and click the
    <span class="NDLGUILabel">Edit</span> button.</li>

    <li>In the Script Editor dialog, verify that "Default Process
    Script" is still listed in the <span class=
    "NDLGUILabel">Current Script</span> drop-down and then click
    the <span class="NDLGUILabel">Clone</span> button.

        <div class="FigureContainer">
            <img src="images/ScriptEditor.jpg" width="624"
            height="506" alt="ScriptEditor (107K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>In the New Script dialog, type a new script name in the
    <span class="NDLGUILabel">New Name</span> field. (For this
    example, type "Optimization Changed".) Verify that "Default
    Process Script" is listed in the <span class="NDLGUILabel">
        Copy Settings From Which Script</span> field and then
        click <span class="NDLGUILabel">OK</span>.

        <div class="FigureContainer">
            <img src="images/NewScript.jpg" width="285" height=
            "196" alt="NewScript (25K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>In the Script Editor dialog, verify that "Optimization
    Changed" is listed in the <span class="NDLGUILabel">Current
    Script</span> drop-down. In the <span class="NDLGUILabel">
        Plugin List for Current Script</span> listbox,
        double-click "Scene Graph Optimization".

        <p class="indent1">The Scene Graph Optimization Options
        dialog opens.</p>

        <div class="FigureContainer">
            <img src="images/SceneGraphOptimizationOptions.jpg"
            width="531" height="548" alt=
            "SceneGraphOptimizationOptions (69K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>To ensure that the .nif file and Max file hierarchies are
    identical, uncheck the following checkboxes:

        <ul>
            <li>Remove childless Nodes</li>

            <li>Remove single-child Nodes</li>

            <li>Merge sibling nodes</li>

            <li>Merge sibling NiMesh objects</li>
        </ul>

        <div class="FigureContainer">
            <img src="images/OptimizationChangedOptions.jpg"
            width="531" height="548" alt=
            "OptimizationChangedOptions (104K)">  
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>

    <li>Click <span class="NDLGUILabel">OK</span>.</li>

    <li>In the Script Editor dialog, click the <span class=
    "NDLGUILabel">Save</span> button and then click <span class=
    "NDLGUILabel">OK</span>.</li>

    <li>In the Export Scene to NIF File dialog, verify that
    "Optimization Changed" is listed in the <span class=
    "NDLGUILabel">Process Script</span> drop-down and then click
    <span class="NDLGUILabel">OK</span>.

        <p class="indent1">The file is exported as Test.nif to
        the directory that you specified in step 4.</p>
    </li>

    <li>Locate and double-click Test.nif.

        <p class="indent1">The file opens in the Gamebryo Asset
        Viewer.</p>
    </li>

    <li>Expand the hierarchy again. Note that the "Teapot01" Max
    node now has a corresponding <span class=
    "NDLSystemFont">NiNode</span>. This <span class=
    "NDLSystemFont">NiNode</span> serves a purely structural
    purpose in this case. As long as no one needs it for
    animation or to use as a target, we can safely get rid of it.
    By changing the optimization settings, we turned off the
    behavior that removed this node from the scene.

        <div class="FigureContainer">
            <img src="images/TeapotAfter.jpg" width="703" height=
            "573" alt="TeapotAfter (114K)"> 
            <!-- <p class="FigureCaption">{Figure caption}</p> -->
        </div>
    </li>
</ol>

<table class="NDLNoteContainer" width="100%">
    <tr align="left">
        <td class="NDLNoteContainerTD">
            <p class="NDLHeadingNoteContainer">Note</p>

            <div class="NDLNote">
                To avoid having to tweak optimization settings
                via the Scene Graph Optimization options, you can
                add "NiOptimizeKeep" to the user-defined
                properties of the object(s) that you want to
                keep. This will eliminate most of the need to
                edit the optimization settings. The
                NiOptimization Utility aids in management of
                these objects.
            </div>
        </td>
    </tr>
</table>

<p class="NDLHeadingRelatedTopic">Related topics</p>

<ul>
    <li><a href="Changing_The_Process_Script.htm">Changing the
    Process Script in 3ds Max</a></li>

    <li><a href="Changing_The_Export_Script.htm">Changing the
    Export Script in 3ds Max</a></li>

    <li><a href=
    "Gamebryo_MaxScript_Toolbar_Introduction.htm">Gamebryo
    MaxScript Toolbar Introduction</a></li>

    <li><a href=
    "../../Tools/Tool_Plug_in_Testbed/The_Script_Editor_Dialog.htm">
    Tool Plug-in Testbed Script Editor Interface Options</a></li>

    <li><a href=
    "../../Reference/Tool_Plug_ins/Available_Tool_Plug_ins.htm">Available
    Tool Plug-ins</a></li>

    <li><a href=
    "Scripting_the_Art_Pipeline_in_3ds_Max.htm">Scripting the Art
    Pipeline in 3ds Max</a></li>

    <li><a href=
    "../../Reference/Tool_Plug_ins/Scene_Graph_Optimization.htm">Scene
    Graph Optimization</a></li>

    <li><a href="NiOptimization_Helper.htm">NiOptimization
    Helper</a></li>
</ul>

<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
